# 汎用 Design.md 生成プロンプト (TDD拡張版)

## プロンプト

`requirements.md` に基づいて、**テスト駆動開発（TDD）と "Tidy First" の原則を反映した** アプリケーションの初期設計書を作成してください。この設計は、TDDサイクルを通じて進化・リファクタリングされることを前提とします。

**入力ファイル:**
- `requirements.md` (TDD指向の要件定義書)

**設計書に含める内容：**

1.  **技術スタックの提案**
    *   `requirements.md` を満たし、かつ **自動テストが容易な** 技術スタックを提案してください。
    *   テストフレームワークやライブラリも含め、選定理由を明確に記述してください。

2.  **初期アーキテクチャ設計**
    *   **シンプルな設計**: "You Aren't Gonna Need It" (YAGNI) の原則に従い、現時点で必要な最小限のアーキテクチャを提案してください。
    *   **関心の分離**: テスト容易性を高めるため、UI、ビジネスロジック、データアクセスなどの関心事が明確に分離された設計を心がけてください。
    *   システム全体の構成図をMermaid形式で、シンプルな形で記述してください。

3.  **データモデル設計**
    *   アプリケーションで扱う主要なデータ構造の初期案を定義してください。
    *   この時点では詳細すぎず、TDDの進行に合わせて拡張できるような柔軟性を持たせてください。

4.  **API設計（インターフェース定義）**
    *   コンポーネント間やモジュール間の境界となるインターフェース（API）を定義してください。
    *   各インターフェースが単一の責任を持つように設計してください。

5.  **テスト戦略**
    *   **TDDサイクルの具体化**: Red-Green-Refactorのサイクルを、このプロジェクトでどのように実践するかの具体的な方針を示してください。
    *   **テストの分類**: ユニットテスト、統合テスト、E2Eテストの役割分担と、それぞれのテストで何を確認するのかを定義してください。
    *   **テストダブル**: 必要に応じて、スタブやモックなどのテストダブルをどのように利用するかの戦略を記述してください。

6.  **"Tidy First" の初期計画**
    *   **リファクタリングの候補**: `requirements.md` を見て、将来的にリファクタリングが必要になりそうな箇所（例：複雑になりそうなロジック、重複の可能性がある処理）を予測し、リストアップしてください。
    *   これは、開発中に「構造的変更」と「振る舞いの変更」を意識するための初期的なガイドとなります。

この設計書は、完璧な最終設計ではなく、TDDプロセスを開始するための「出発点」としての役割を果たします。