# 汎用 Tasks.md 生成プロンプト (TDD拡張版)

## プロンプト

`requirements.md` と `design.md` に基づいて、**テスト駆動開発（TDD）のサイクルを具体的に実行するための** タスクリストを作成してください。

**入力ファイル:**
- `requirements.md` (TDD指向の要件定義書)
- `design.md` (TDD指向の設計書)

**タスクリストの仕様：**

1.  **TDDサイクルに基づいたタスク構成**
    *   `requirements.md` に定義された **最小単位の振る舞い** ごとにタスクグループを作成してください。
    *   各タスクグループは、明確に **Red → Green → Refactor** のステップに分解してください。

2.  **具体的で実行可能なタスク**
    *   **Red (テスト作成)**: 「〜を検証する失敗するテストを書く」という形式で記述してください。対象となる要件IDを明記してください。
    *   **Green (実装)**: 「テストをパスするための最小限のコードを実装する」という形式で記述してください。
    *   **Refactor (リファクタリング)**: 「コードをクリーンにする（例：重複の排除、命名の改善など）」という形式で記述してください。リファクタリングが不要な場合はその旨を記述します。

3.  **"Tidy First" の組み込み**
    *   `design.md` の「リファクタリングの候補」や、開発の文脈から、大きな構造的変更が必要だと判断された場合、それを独立したタスクとしてリストの適切な位置に挿入してください。
    *   構造的変更のタスクは、振る舞いの変更タスクとは明確に区別して記述してください。（例： `[STRUCTURAL]` プレフィックス）

4.  **進捗管理とトレーサビリティ**
    *   Markdownのチェックボックス形式 `[ ]` を使用してください。
    *   各TDDサイクルがどの要件に基づいているかを明確に示してください。

**タスクリストの構成例:**

*   **要件ID: REQ-001 (ユーザーログイン機能)**
    *   **振る舞い: 正常な認証情報でログインできる**
        *   `[ ]` **Red**: 正常なIDとパスワードでログイン成功を検証する、失敗するAPIレベルのテストを追加する (REQ-001-AC1)
        *   `[ ]` **Green**: ログインAPIを実装し、テストをパスさせる
        *   `[ ]` **Refactor**: 認証ロジックの重複や命名を改善する
    *   **振る舞い: 不正な認証情報ではログインできない**
        *   `[ ]` **Red**: 不正なパスワードでログイン失敗を検証するテストを追加する (REQ-001-AC2)
        *   `[ ]` **Green**: パスワード検証ロジックを実装し、テストをパスさせる
        *   `[ ]` **Refactor**: リファクタリングは現時点では不要

*   **[STRUCTURAL] 構造的変更: 認証モジュールを抽出する**
    *   `[ ]` 関連する認証コードを `AuthService` に移動する
    *   `[ ]` すべてのテストがパスすることを確認する

このタスクリストは、開発者がTDDの規律に従い、一歩一歩着実に開発を進めるための具体的なガイドとなります。